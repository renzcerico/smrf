!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/material/core"),require("@angular/material/select"),require("@angular/material/form-field"),require("@angular/cdk/keycodes"),require("@angular/cdk/scrolling"),require("@angular/cdk/a11y"),require("rxjs"),require("rxjs/operators"),require("@angular/material/button"),require("@angular/material/checkbox"),require("@angular/material/icon"),require("@angular/material/input"),require("@angular/material/progress-spinner"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-mat-select-search",["exports","@angular/core","@angular/forms","@angular/material/core","@angular/material/select","@angular/material/form-field","@angular/cdk/keycodes","@angular/cdk/scrolling","@angular/cdk/a11y","rxjs","rxjs/operators","@angular/material/button","@angular/material/checkbox","@angular/material/icon","@angular/material/input","@angular/material/progress-spinner","@angular/common"],t):t((e=e||self)["ngx-mat-select-search"]={},e.ng.core,e.ng.forms,e.ng.material.core,e.ng.material.select,e.ng.material["form-field"],e.ng.cdk.keycodes,e.ng.cdk.scrolling,e.ng.cdk.a11y,e.rxjs,e.rxjs.operators,e.ng.material.button,e.ng.material.checkbox,e.ng.material.icon,e.ng.material.input,e.ng.material["progress-spinner"],e.ng.common)}(this,(function(e,t,n,a,i,o,r,s,l,c,p,h,u,d,m,g,f){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function y(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r}function v(e,t){return function(n,a){t(n,a,e)}}var b=function(){function e(){}return e=y([t.Directive({selector:"[ngxMatSelectSearchClear]"})],e)}(),S=function(){function e(e,n,a,i,o,r){void 0===i&&(i=null),void 0===r&&(r=null),this.matSelect=e,this.changeDetectorRef=n,this._viewportRuler=a,this.matOption=i,this.liveAnnouncer=o,this.matFormField=r,this.placeholderLabel="Suche",this.type="text",this.noEntriesFoundLabel="Keine Optionen gefunden",this.indexAndLengthScreenReaderText=" of ",this.clearSearchInput=!0,this.searching=!1,this.disableInitialFocus=!1,this.preventHomeEndKeyPropagation=!1,this.disableScrollToActiveOnOptionsChanged=!1,this.ariaLabel="dropdown search",this.showToggleAllCheckbox=!1,this.toggleAllCheckboxChecked=!1,this.toggleAllCheckboxIndeterminate=!1,this.toggleAll=new t.EventEmitter,this.onChange=function(e){},this.onTouched=function(e){},this.overlayClassSet=!1,this.change=new t.EventEmitter,this._onDestroy=new c.Subject}var h;return h=e,Object.defineProperty(e.prototype,"isInsideMatOption",{get:function(){return!!this.matOption},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this,t="mat-select-search-panel";this.matSelect.panelClass?Array.isArray(this.matSelect.panelClass)?this.matSelect.panelClass.push(t):"string"==typeof this.matSelect.panelClass?this.matSelect.panelClass=[this.matSelect.panelClass,t]:"object"==typeof this.matSelect.panelClass&&(this.matSelect.panelClass[t]=!0):this.matSelect.panelClass=t,this.matOption&&(this.matOption.disabled=!0,this.matOption._getHostElement().classList.add("contains-mat-select-search")),this.matSelect.openedChange.pipe(p.delay(1),p.takeUntil(this._onDestroy)).subscribe((function(t){t?(e.updateInputWidth(),e.disableInitialFocus||e._focus()):e.clearSearchInput&&e._reset()})),this.matSelect.openedChange.pipe(p.take(1)).pipe(p.takeUntil(this._onDestroy)).subscribe((function(){e.matSelect._keyManager?e.matSelect._keyManager.change.pipe(p.takeUntil(e._onDestroy)).subscribe((function(){return e.adjustScrollTopToFitActiveOptionIntoView()})):console.log("_keyManager was not initialized."),e._options=e.matSelect.options,e._options.changes.pipe(p.takeUntil(e._onDestroy)).subscribe((function(){var t=e.matSelect._keyManager;t&&e.matSelect.panelOpen&&setTimeout((function(){t.setFirstItemActive(),setTimeout((function(){e.updateInputWidth()})),e.matOption&&(e._noEntriesFound()?e.matOption._getHostElement().classList.add("mat-select-search-no-entries-found"):e.matOption._getHostElement().classList.remove("mat-select-search-no-entries-found")),e.disableScrollToActiveOnOptionsChanged||e.adjustScrollTopToFitActiveOptionIntoView()}),1)}))})),this.change.pipe(p.takeUntil(this._onDestroy)).subscribe((function(){e.changeDetectorRef.detectChanges()})),this._viewportRuler.change().pipe(p.takeUntil(this._onDestroy)).subscribe((function(){e.matSelect.panelOpen&&e.updateInputWidth()})),this.initMultipleHandling()},e.prototype._emitSelectAllBooleanToParent=function(e){this.toggleAll.emit(e)},e.prototype.ngOnDestroy=function(){this._onDestroy.next(),this._onDestroy.complete()},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout((function(){e.setOverlayClass()})),this.matSelect.openedChange.pipe(p.take(1),p.takeUntil(this._onDestroy)).subscribe((function(){e.matSelect.options.changes.pipe(p.takeUntil(e._onDestroy)).subscribe((function(){e.changeDetectorRef.markForCheck()}))}))},e.prototype._isToggleAllCheckboxVisible=function(){return this.matSelect.multiple&&this.showToggleAllCheckbox},e.prototype._handleKeydown=function(e){(e.key&&1===e.key.length||e.keyCode>=r.A&&e.keyCode<=r.Z||e.keyCode>=r.ZERO&&e.keyCode<=r.NINE||e.keyCode===r.SPACE||this.preventHomeEndKeyPropagation&&(e.keyCode===r.HOME||e.keyCode===r.END))&&e.stopPropagation()},e.prototype._handleKeyup=function(e){if(e.keyCode===r.UP_ARROW||e.keyCode===r.DOWN_ARROW){var t=this.matSelect._getAriaActiveDescendant(),n=this._options.toArray().findIndex((function(e){return e.id===t}));if(-1!==n){var a=this._options.toArray()[n];this.liveAnnouncer.announce(a.viewValue+" "+this.getAriaIndex(n)+this.indexAndLengthScreenReaderText+this.getAriaLength())}}},e.prototype.getAriaIndex=function(e){return 0===this.getOptionsLengthOffset()?e+1:e},e.prototype.getAriaLength=function(){return this._options.toArray().length-this.getOptionsLengthOffset()},e.prototype.writeValue=function(e){e!==this._value&&(this._value=e,this.change.emit(e))},e.prototype.onInputChange=function(e){e!==this._value&&(this.initMultiSelectedValues(),this._value=e,this.onChange(e),this.change.emit(e))},e.prototype.onBlur=function(e){this.writeValue(e),this.onTouched()},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype._focus=function(){if(this.searchSelectInput&&this.matSelect.panel){var e=this.matSelect.panel.nativeElement,t=e.scrollTop;this.searchSelectInput.nativeElement.focus(),e.scrollTop=t}},e.prototype._reset=function(e){this.searchSelectInput&&(this.searchSelectInput.nativeElement.value="",this.onInputChange(""),this.matOption&&!e&&this.matOption._getHostElement().classList.remove("mat-select-search-no-entries-found"),e&&this._focus())},e.prototype.setOverlayClass=function(){var e=this;if(!this.overlayClassSet){var t=["cdk-overlay-pane-select-search"];this.matOption||t.push("cdk-overlay-pane-select-search-with-offset"),this.matSelect.overlayDir.attach.pipe(p.takeUntil(this._onDestroy)).subscribe((function(){for(var n,a=e.searchSelectInput.nativeElement;a=a.parentElement;)if(a.classList.contains("cdk-overlay-pane")){n=a;break}n&&t.forEach((function(e){n.classList.add(e)}))})),this.overlayClassSet=!0}},e.prototype.initMultipleHandling=function(){var e=this;this.matSelect.valueChange.pipe(p.takeUntil(this._onDestroy)).subscribe((function(t){if(e.matSelect.multiple){var n=!1;if(e._value&&e._value.length&&e.previousSelectedValues&&Array.isArray(e.previousSelectedValues)){t&&Array.isArray(t)||(t=[]);var a=e.matSelect.options.map((function(e){return e.value}));e.previousSelectedValues.forEach((function(e){-1===t.indexOf(e)&&-1===a.indexOf(e)&&(t.push(e),n=!0)}))}n&&e.matSelect._onChange(t),e.previousSelectedValues=t}}))},e.prototype.adjustScrollTopToFitActiveOptionIntoView=function(){if(this.matSelect.panel&&this.matSelect.options.length>0){var e=this.getMatOptionHeight(),t=this.matSelect._keyManager.activeItemIndex||0,n=a._countGroupLabelsBeforeOption(t,this.matSelect.options,this.matSelect.optionGroups),o=(this.matOption?-1:0)+n+t,r=this.matSelect.panel.nativeElement.scrollTop,s=this.innerSelectSearch.nativeElement.offsetHeight,l=Math.floor((i.SELECT_PANEL_MAX_HEIGHT-s)/e),c=Math.round((r+s)/e)-1;c>=o?this.matSelect.panel.nativeElement.scrollTop=o*e:c+l<=o&&(this.matSelect.panel.nativeElement.scrollTop=(o+1)*e-(i.SELECT_PANEL_MAX_HEIGHT-s))}},e.prototype.updateInputWidth=function(){if(this.innerSelectSearch&&this.innerSelectSearch.nativeElement){for(var e,t=this.innerSelectSearch.nativeElement;t=t.parentElement;)if(t.classList.contains("mat-select-panel")){e=t;break}e&&(this.innerSelectSearch.nativeElement.style.width=e.clientWidth+"px")}},e.prototype.getMatOptionHeight=function(){return this.matSelect.options.length>0?this.matSelect.options.first._getHostElement().getBoundingClientRect().height:0},e.prototype.initMultiSelectedValues=function(){this.matSelect.multiple&&!this._value&&(this.previousSelectedValues=this.matSelect.options.filter((function(e){return e.selected})).map((function(e){return e.value})))},e.prototype._noEntriesFound=function(){if(this._options)return this.noEntriesFoundLabel&&this.value&&this._options.length===this.getOptionsLengthOffset()},e.prototype.getOptionsLengthOffset=function(){return this.matOption?1:0},e.ctorParameters=function(){return[{type:i.MatSelect,decorators:[{type:t.Inject,args:[i.MatSelect]}]},{type:t.ChangeDetectorRef},{type:s.ViewportRuler},{type:a.MatOption,decorators:[{type:t.Optional},{type:t.Inject,args:[a.MatOption]}]},{type:l.LiveAnnouncer},{type:o.MatFormField,decorators:[{type:t.Optional},{type:t.Inject,args:[o.MatFormField]}]}]},y([t.Input()],e.prototype,"placeholderLabel",void 0),y([t.Input()],e.prototype,"type",void 0),y([t.Input()],e.prototype,"noEntriesFoundLabel",void 0),y([t.Input()],e.prototype,"indexAndLengthScreenReaderText",void 0),y([t.Input()],e.prototype,"clearSearchInput",void 0),y([t.Input()],e.prototype,"searching",void 0),y([t.Input()],e.prototype,"disableInitialFocus",void 0),y([t.Input()],e.prototype,"preventHomeEndKeyPropagation",void 0),y([t.Input()],e.prototype,"disableScrollToActiveOnOptionsChanged",void 0),y([t.Input()],e.prototype,"ariaLabel",void 0),y([t.Input()],e.prototype,"showToggleAllCheckbox",void 0),y([t.Input()],e.prototype,"toggleAllCheckboxChecked",void 0),y([t.Input()],e.prototype,"toggleAllCheckboxIndeterminate",void 0),y([t.Output()],e.prototype,"toggleAll",void 0),y([t.ViewChild("searchSelectInput",{read:t.ElementRef,static:!0})],e.prototype,"searchSelectInput",void 0),y([t.ViewChild("innerSelectSearch",{read:t.ElementRef,static:!0})],e.prototype,"innerSelectSearch",void 0),y([t.ContentChild(b,{static:!1})],e.prototype,"clearIcon",void 0),y([t.HostBinding("class.mat-select-search-inside-mat-option")],e.prototype,"isInsideMatOption",null),e=h=y([t.Component({selector:"ngx-mat-select-search",template:'\x3c!-- Placeholder to adjust vertical offset of the mat-option elements --\x3e\r\n<input matInput class="mat-select-search-input mat-select-search-hidden"/>\r\n\r\n\x3c!-- Note: the  mat-datepicker-content mat-tab-header are needed to inherit the material theme colors, see PR #22 --\x3e\r\n<div\r\n      #innerSelectSearch\r\n      class="mat-select-search-inner mat-typography mat-datepicker-content mat-tab-header"\r\n      [ngClass]="{\'mat-select-search-inner-multiple\': matSelect.multiple, \'mat-select-search-inner-toggle-all\': _isToggleAllCheckboxVisible() }">\r\n\r\n  <mat-checkbox *ngIf="_isToggleAllCheckboxVisible()"\r\n                [color]="matFormField?.color"\r\n                class="mat-select-search-toggle-all-checkbox"\r\n                [checked]="toggleAllCheckboxChecked"\r\n                [indeterminate]="toggleAllCheckboxIndeterminate"\r\n                (change)="_emitSelectAllBooleanToParent($event.checked)"\r\n  ></mat-checkbox>\r\n\r\n  <input matInput\r\n         class="mat-select-search-input"\r\n         autocomplete="off"\r\n         [type]="type"\r\n         [value]="value"\r\n         #searchSelectInput\r\n         (keydown)="_handleKeydown($event)"\r\n         (keyup)="_handleKeyup($event)"\r\n         (input)="onInputChange($event.target.value)"\r\n         (blur)="onBlur($event.target.value)"\r\n         [placeholder]="placeholderLabel"\r\n         [attr.aria-label]="ariaLabel"\r\n  />\r\n  <mat-spinner *ngIf="searching"\r\n          class="mat-select-search-spinner"\r\n          diameter="16"></mat-spinner>\r\n\r\n  <button mat-button\r\n          *ngIf="value && !searching"\r\n          mat-icon-button\r\n          aria-label="Clear"\r\n          (click)="_reset(true)"\r\n          class="mat-select-search-clear">\r\n    <ng-content *ngIf="clearIcon; else defaultIcon" select="[ngxMatSelectSearchClear]"></ng-content>\r\n    <ng-template #defaultIcon>\r\n      <mat-icon>close</mat-icon>\r\n    </ng-template>\r\n  </button>\r\n\r\n  <ng-content select=".mat-select-search-custom-header-content"></ng-content>\r\n\r\n</div>\r\n\r\n<div *ngIf="_noEntriesFound()"\r\n     class="mat-select-search-no-entries-found">\r\n  {{noEntriesFoundLabel}}\r\n</div>\r\n\x3c!--\r\nCopyright (c) 2018 Bithost GmbH All Rights Reserved.\r\n\r\nUse of this source code is governed by an MIT-style license that can be\r\nfound in the LICENSE file at https://angular.io/license\r\n--\x3e\r\n',providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return h})),multi:!0}],changeDetection:t.ChangeDetectionStrategy.OnPush,styles:[".mat-select-search-hidden{visibility:hidden}.mat-select-search-inner{position:absolute;top:0;width:100%;border-bottom-width:1px;border-bottom-style:solid;z-index:100;font-size:inherit;box-shadow:none;border-radius:4px 4px 0 0;-webkit-transform:translate3d(0,0,0)}.mat-select-search-inner.mat-select-search-inner-multiple{width:100%}.mat-select-search-inner.mat-select-search-inner-multiple.mat-select-search-inner-toggle-all{display:flex;align-items:center}.mat-select-search-inner .mat-input-element{flex-basis:auto}.mat-select-search-inner .mat-input-element:-ms-input-placeholder{-ms-user-select:text}::ng-deep .mat-select-search-panel{transform:none!important;overflow-x:hidden}.mat-select-search-input{padding:16px 36px 16px 16px;box-sizing:border-box}.mat-select-search-no-entries-found{padding:16px}.mat-select-search-clear{position:absolute;right:4px;top:5px}.mat-select-search-spinner{position:absolute;right:16px;top:calc(50% - 8px)}:host.mat-select-search-inside-mat-option .mat-select-search-input{padding-top:0;padding-bottom:0;height:3em;line-height:3em}:host.mat-select-search-inside-mat-option .mat-select-search-clear{top:3px}::ng-deep .cdk-overlay-pane-select-search.cdk-overlay-pane-select-search-with-offset{margin-top:-50px}::ng-deep .mat-option[aria-disabled=true].contains-mat-select-search{position:static;padding:0}::ng-deep .mat-option[aria-disabled=true].contains-mat-select-search .mat-icon{margin-right:0}::ng-deep .mat-option[aria-disabled=true].contains-mat-select-search .mat-option-pseudo-checkbox{display:none}::ng-deep .mat-option[aria-disabled=true].contains-mat-select-search.mat-select-search-no-entries-found{height:6em}.mat-select-search-toggle-all-checkbox{padding-left:16px;padding-bottom:2px}"]}),v(0,t.Inject(i.MatSelect)),v(3,t.Optional()),v(3,t.Inject(a.MatOption)),v(5,t.Optional()),v(5,t.Inject(o.MatFormField))],e)}(),x=function(){function e(){}return e=y([t.NgModule({imports:[f.CommonModule,h.MatButtonModule,u.MatCheckboxModule,d.MatIconModule,m.MatInputModule,g.MatProgressSpinnerModule],declarations:[S,b],exports:[S,b]})],e)}();e.MatSelectSearchComponent=S,e.MatSelectSearchVersion="2.1.1",e.NgxMatSelectSearchModule=x,e.ɵa=b,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-mat-select-search.umd.min.js.map